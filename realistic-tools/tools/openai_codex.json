[
  {
    "name": "shell_command",
    "description": "Runs a shell command and returns its output. Always set the workdir param when using the shell_command function. Do not use cd unless absolutely necessary.",
    "parameters": {
      "command": {
        "type": "string",
        "description": "The shell script to execute in the user's default shell"
      },
      "workdir": {
        "type": "string",
        "description": "The working directory to execute the command in"
      },
      "timeout_ms": {
        "type": "number",
        "description": "The timeout for the command in milliseconds"
      },
      "with_escalated_permissions": {
        "type": "boolean",
        "description": "Whether to request escalated permissions. Set to true if command needs to be run without sandbox restrictions"
      },
      "justification": {
        "type": "string",
        "description": "Only set if with_escalated_permissions is true. 1-sentence explanation of why we want to run this command."
      }
    }
  },
  {
    "name": "read_file",
    "description": "Reads a local file with 1-indexed line numbers, supporting slice and indentation-aware block modes.",
    "parameters": {
      "file_path": {
        "type": "string",
        "description": "The path to the file to read"
      },
      "offset": {
        "type": "number",
        "description": "1-indexed line number to start reading from"
      },
      "limit": {
        "type": "number",
        "description": "Maximum number of lines to read"
      }
    }
  },
  {
    "name": "list_dir",
    "description": "Lists entries in a local directory with 1-indexed entry numbers and simple type labels.",
    "parameters": {
      "dir_path": {
        "type": "string",
        "description": "The path to the directory to list"
      },
      "offset": {
        "type": "number",
        "description": "1-indexed entry offset to start listing from"
      },
      "limit": {
        "type": "number",
        "description": "Maximum number of entries to return"
      },
      "depth": {
        "type": "number",
        "description": "Depth of directory traversal"
      }
    }
  },
  {
    "name": "grep_files",
    "description": "Finds files whose contents match the pattern and lists them by modification time.",
    "parameters": {
      "pattern": {
        "type": "string",
        "description": "The regex pattern to search for"
      },
      "include": {
        "type": "string",
        "description": "Glob pattern to filter which files to search (e.g., \"*.py\")"
      },
      "path": {
        "type": "string",
        "description": "Directory to search in"
      },
      "limit": {
        "type": "number",
        "description": "Maximum number of results to return"
      }
    }
  },
  {
    "name": "apply_patch",
    "description": "Applies a code patch to files. Uses a custom diff format with context lines for precise edits. Supports creating, updating, deleting, and moving files.",
    "parameters": {
      "patch": {
        "type": "string",
        "description": "The patch content in Codex diff format. Begins with '*** Begin Patch' and ends with '*** End Patch'. Supports '*** Add File:', '*** Delete File:', '*** Update File:', and '*** Move to:' operations."
      }
    }
  },
  {
    "name": "update_plan",
    "description": "Updates the task plan. Provide an optional explanation and a list of plan items, each with a step and status. At most one step can be in_progress at a time.",
    "parameters": {
      "explanation": {
        "type": "string",
        "description": "Optional explanation of the plan update"
      },
      "plan": {
        "type": "array",
        "description": "The list of steps",
        "items": {
          "type": "object",
          "properties": {
            "step": {
              "type": "string",
              "description": "Description of the step"
            },
            "status": {
              "type": "string",
              "enum": ["pending", "in_progress", "completed"],
              "description": "The step status"
            }
          },
          "required": ["step", "status"]
        }
      }
    }
  },
  {
    "name": "view_image",
    "description": "Attach a local image (by filesystem path) to the conversation context for this turn.",
    "parameters": {
      "path": {
        "type": "string",
        "description": "Local filesystem path to an image file"
      }
    }
  },
  {
    "name": "request_user_input",
    "description": "Request user input by presenting a question with predefined options. Use this to gather preferences, clarify requirements, or make decisions during task execution.",
    "parameters": {
      "questions": {
        "type": "array",
        "description": "List of questions to ask the user",
        "items": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Unique identifier for the question"
            },
            "header": {
              "type": "string",
              "description": "Short label for the question"
            },
            "question": {
              "type": "string",
              "description": "The full question text"
            },
            "options": {
              "type": "array",
              "description": "Selectable options for the user",
              "items": {
                "type": "object",
                "properties": {
                  "label": {
                    "type": "string",
                    "description": "Display text for the option"
                  },
                  "description": {
                    "type": "string",
                    "description": "Brief explanation of the option"
                  }
                },
                "required": ["label"]
              }
            }
          },
          "required": ["id", "question"]
        }
      }
    }
  }
]
